{"filter":false,"title":"2014-12-25-angular-hapijs-authentication.md","tooltip":"/_posts/blog/2014-12-25-angular-hapijs-authentication.md","undoManager":{"mark":100,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":16,"column":36},"end":{"row":16,"column":37},"action":"remove","lines":["，"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":36},"end":{"row":16,"column":37},"action":"insert","lines":["；"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":36},"end":{"row":16,"column":37},"action":"remove","lines":["；"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":36},"end":{"row":16,"column":37},"action":"insert","lines":["。"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":37},"end":{"row":16,"column":38},"action":"insert","lines":["2"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":38},"end":{"row":16,"column":39},"action":"insert","lines":["、"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":39},"end":{"row":16,"column":42},"action":"insert","lines":["服务器"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":42},"end":{"row":16,"column":44},"action":"insert","lines":["返回"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":44},"end":{"row":16,"column":45},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":45},"end":{"row":16,"column":46},"action":"insert","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":46},"end":{"row":16,"column":47},"action":"insert","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":47},"end":{"row":16,"column":48},"action":"insert","lines":["4"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":48},"end":{"row":16,"column":49},"action":"insert","lines":["0"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":49},"end":{"row":16,"column":50},"action":"insert","lines":["1"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":50},"end":{"row":16,"column":51},"action":"insert","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":51},"end":{"row":16,"column":52},"action":"insert","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":52},"end":{"row":16,"column":53},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":53},"end":{"row":16,"column":54},"action":"insert","lines":["时"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":54},"end":{"row":16,"column":55},"action":"insert","lines":["；"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":54},"end":{"row":16,"column":55},"action":"remove","lines":["；"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":54},"end":{"row":16,"column":55},"action":"insert","lines":["。"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":55},"end":{"row":16,"column":56},"action":"insert","lines":["3"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":56},"end":{"row":16,"column":57},"action":"insert","lines":["、"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":57},"end":{"row":16,"column":58},"action":"insert","lines":["A"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":57},"end":{"row":16,"column":58},"action":"remove","lines":["A"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":57},"end":{"row":16,"column":58},"action":"insert","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":58},"end":{"row":16,"column":59},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":59},"end":{"row":16,"column":60},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":59},"end":{"row":16,"column":60},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":58},"end":{"row":16,"column":59},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":57},"end":{"row":16,"column":58},"action":"remove","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":57},"end":{"row":16,"column":59},"action":"insert","lines":["用户"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":58},"end":{"row":16,"column":59},"action":"remove","lines":["户"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":57},"end":{"row":16,"column":58},"action":"remove","lines":["用"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":57},"end":{"row":16,"column":58},"action":"insert","lines":["A"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":58},"end":{"row":16,"column":59},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":59},"end":{"row":16,"column":60},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":57},"end":{"row":16,"column":60},"action":"remove","lines":["Ang"]},{"start":{"row":16,"column":57},"end":{"row":16,"column":64},"action":"insert","lines":["Angular"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":64},"end":{"row":16,"column":65},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":65},"end":{"row":16,"column":66},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":66},"end":{"row":16,"column":67},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":67},"end":{"row":16,"column":68},"action":"insert","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":68},"end":{"row":16,"column":69},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":69},"end":{"row":16,"column":70},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":70},"end":{"row":16,"column":71},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":70},"end":{"row":16,"column":71},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":69},"end":{"row":16,"column":70},"action":"remove","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":68},"end":{"row":16,"column":69},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":67},"end":{"row":16,"column":68},"action":"remove","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":66},"end":{"row":16,"column":67},"action":"remove","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":65},"end":{"row":16,"column":66},"action":"remove","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":65},"end":{"row":16,"column":67},"action":"insert","lines":["路由"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":67},"end":{"row":16,"column":68},"action":"insert","lines":["中"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":68},"end":{"row":16,"column":70},"action":"insert","lines":["表明"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":69},"end":{"row":16,"column":70},"action":"remove","lines":["明"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":68},"end":{"row":16,"column":69},"action":"remove","lines":["表"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":67},"end":{"row":16,"column":68},"action":"remove","lines":["中"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":67},"end":{"row":16,"column":68},"action":"insert","lines":["中"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":68},"end":{"row":16,"column":70},"action":"insert","lines":["表明"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":70},"end":{"row":16,"column":72},"action":"insert","lines":["需要"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":72},"end":{"row":16,"column":74},"action":"insert","lines":["登陆"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":74},"end":{"row":16,"column":76},"action":"insert","lines":["才能"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":76},"end":{"row":16,"column":78},"action":"insert","lines":["反问"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":77},"end":{"row":16,"column":78},"action":"remove","lines":["问"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":76},"end":{"row":16,"column":77},"action":"remove","lines":["反"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":76},"end":{"row":16,"column":78},"action":"insert","lines":["访问"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":78},"end":{"row":16,"column":79},"action":"insert","lines":["的"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":79},"end":{"row":16,"column":81},"action":"insert","lines":["资源"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":81},"end":{"row":16,"column":82},"action":"insert","lines":["，"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":82},"end":{"row":16,"column":83},"action":"insert","lines":["但"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":83},"end":{"row":16,"column":84},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":84},"end":{"row":16,"column":91},"action":"insert","lines":["Angular"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":91},"end":{"row":16,"column":92},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":92},"end":{"row":16,"column":93},"action":"insert","lines":["在"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":93},"end":{"row":16,"column":96},"action":"insert","lines":["客户端"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":96},"end":{"row":16,"column":99},"action":"insert","lines":["检测到"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":99},"end":{"row":16,"column":101},"action":"insert","lines":["用户"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":101},"end":{"row":16,"column":104},"action":"insert","lines":["啥岗位"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":103},"end":{"row":16,"column":104},"action":"remove","lines":["位"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":102},"end":{"row":16,"column":103},"action":"remove","lines":["岗"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":101},"end":{"row":16,"column":102},"action":"remove","lines":["啥"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":101},"end":{"row":16,"column":103},"action":"insert","lines":["尚未"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":103},"end":{"row":16,"column":105},"action":"insert","lines":["登陆"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":105},"end":{"row":16,"column":106},"action":"insert","lines":["时"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":106},"end":{"row":16,"column":107},"action":"insert","lines":["；"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":106},"end":{"row":16,"column":107},"action":"remove","lines":["；"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":106},"end":{"row":16,"column":107},"action":"insert","lines":["。"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":107},"end":{"row":16,"column":108},"action":"insert","lines":["4"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":108},"end":{"row":16,"column":109},"action":"insert","lines":["、"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":109},"end":{"row":16,"column":111},"action":"insert","lines":["程序"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":111},"end":{"row":16,"column":114},"action":"insert","lines":["一开始"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":114},"end":{"row":16,"column":115},"action":"insert","lines":["时"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":115},"end":{"row":16,"column":116},"action":"insert","lines":["。"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":115},"end":{"row":16,"column":116},"action":"insert","lines":["（"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":116},"end":{"row":16,"column":117},"action":"insert","lines":["视"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":117},"end":{"row":16,"column":119},"action":"insert","lines":["需求"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":119},"end":{"row":16,"column":121},"action":"insert","lines":["而定"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":121},"end":{"row":16,"column":122},"action":"insert","lines":["）"]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":0},"end":{"row":14,"column":0},"action":"remove","lines":["When a user sends his credentials, the Node.js server checks that they are correct and answers with a unique token built with the user informations. The AngularJS application stores the token in the user’ SessionStorage and adds an Authorization header containing the token in every requests made after that. If the endpoint is restricted to authenticated users, the server checks the validity of the token and returns the data if the token is valid or a status code 401 otherwise. In addition to that, the AngularJS application checks if the user is logged in and if he can access the requested route. Otherwise, the user is redirected to the login page.","",""]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":0},"end":{"row":24,"column":94},"action":"remove","lines":["","    Client: Enter your email and password into the login form.","    Client: On form submit call $auth.login() with email and password.","    Client: Send a POST request to /auth/login.","    Server: Check if email exists, if not - return 401.","    Server: Check if password is correct, if not - return 401.","    Server: Create a JSON Web Token and send it back to the client.","    Client: Parse the token and save it to Local Storage for subsequent use after page reload."]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":0},"end":{"row":17,"column":0},"action":"remove","lines":["",""]}]}]]},"ace":{"folds":[],"scrolltop":120,"scrollleft":0,"selection":{"start":{"row":16,"column":0},"end":{"row":16,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":true,"wrapToView":true},"firstLineState":{"row":6,"state":"allowBlock","mode":"ace/mode/markdown"}},"timestamp":1419510337511,"hash":"27a259bd4a9f710c82181fccf262bc5f6abf20a0"}